<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <title>Y√™u c·∫ßu c·ª©u n·∫°n kh·∫©n c·∫•p</title>
  <link rel="stylesheet" href="css/style.css" />
</head>
<body>
  <div class="container">
    <h2 class="danger">üö® Y√äU C·∫¶U M√ÅU KH·∫®N C·∫§P</h2>
    <form id="rescueForm" class="form-card">
      <input type="text" placeholder="H·ªç t√™n b·ªánh nh√¢n" id="patientName" required />
      <input type="text" placeholder="Nh√≥m m√°u c·∫ßn" id="bloodNeeded" required />
      <input type="text" placeholder="S·ªë l∆∞·ª£ng t√∫i m√°u" id="bags" value="1" />
      <input type="text" placeholder="B·ªánh vi·ªán" id="hospital" required />
      <textarea placeholder="M√¥ t·∫£ t√¨nh tr·∫°ng (t√πy ch·ªçn)" id="note"></textarea>
      <input type="text" placeholder="S·ªë ƒêT ng∆∞·ªùi nh√†" id="contactPhone" required />
      <button type="submit" class="btn danger">G·ª¨I Y√äU C·∫¶U NGAY</button>
    </form>
    <p id="rescueMsg" class="msg"></p>
  </div>

  <script src="js/utils.js"></script>
  <script>
    document.getElementById("rescueForm").onsubmit = function(e) {
      e.preventDefault();
      const requests = getRescueRequests();

      const req = {
        id: Date.now().toString(),
        patientName: document.getElementById("patientName").value,
        bloodNeeded: document.getElementById("bloodNeeded").value,
        bags: document.getElementById("bags").value,
        hospital: document.getElementById("hospital").value,
        note: document.getElementById("note").value,
        contactPhone: document.getElementById("contactPhone").value,
        timestamp: new Date().toLocaleString("vi-VN"),
        status: "ƒêang ch·ªù"
      };

      requests.unshift(req);
      localStorage.setItem("rescueRequests", JSON.stringify(requests));
      document.getElementById("rescueMsg").innerHTML = "ƒê√£ g·ª≠i y√™u c·∫ßu th√†nh c√¥ng! Ch√∫ng t√¥i s·∫Ω li√™n h·ªá s·ªõm nh·∫•t.";
    };
  </script>
</body>
</html>